<link href="$!base/static/css/button-style.css" rel="stylesheet" type="text/css" />
#detail({
	"id":"form-goods-ediremit",
	"hiddens":[
		{"name":"id","value":"$!obj.id"},
		{"name":"goodsSpecifications","value":"$!obj.goodsSpecifications"},
		{"name":"goodsNum","value":"$!obj.goodsNum"},
		{"name":"goodsBuyPrice","value":"$!obj.goodsBuyPrice"},
		{"name":"goodsStatus","value":"$!obj.goodsStatus"},
		{"name":"gstau","value":"$!obj.goodsStatus"},
		{"name":"goodsFreight","value":"$!obj.goodsFreight"}
		
	],
	"rows":[
		{"cols":[
			{"colType":"label","length":"2","colRequired":true,"text":"商品名称"},
			{"colType":"text","length":"9","name":"productName","value":"$!obj.productName","readonly":"true"}
		]},
		{"cols":[
			{"colType":"label","length":"2","colRequired":true,"text":"商品分类"},
			{"colType":"text","length":"9","name":"dicVal","value":"$!obj.dicVal","readonly":"true"}
		]},
		{"cols":[
			{"colType":"label","length":"2","colRequired":true,"text":"商品规格"},
			{"colType":"text","length":"9","name":"goodsSpecificationsmsg","value":"$!obj.goodsSpecifications$!obj.goodsCategory","readonly":"true"}
		]},
		{"cols":[
			{"colType":"label","length":"2","text":"收货数量"},
			{"colType":"text","length":"3","name":"goodsCounts","value":"$!obj.goodsCounts", "readonly":"true"},
			{"colType":"text","length":"0","name":"","value":"$!obj.goodsCategory","readonly":"true" },
			{"colType":"text","length":"3","name":"goodsNum","value":"$!obj.goodsNum","readonly":"true" },
			{"colType":"text","length":"0","name":"","value":"$!obj.goodsCategorys","readonly":"true"}
		]},
		{"cols":[
			{"colType":"label","length":"2","text":"收货时间"},
			{"colType":"text","length":"9","name":"createTime","value":"$!obj.createTime","readonly":"true"}
		]},
		{"cols":[
			{"colType":"label","length":"2","colRequired":true,"text":"状态"},
			{"colType":"select","length":"9","name":"goodsStatus","value":"$!obj.goodsStatus","placeholder":"请输入状态","options":[{"value":"0","text":"新增"},{"value":"1","text":"物流对数"},{"value":"2","text":"物流结款"},{"value":"3","text":"供应商对数"},{"value":"4","text":"供应商结款"},{"value":"5","text":"已完成"}],"readonly":"true"}
		]},
		{"cols":[
			{"colType":"label","length":"2","colRequired":true,"text":"汇款金额"},
			{"colType":"text","length":"9","name":"remitMoney","value":"$!obj.remitMoney","placeholder":"请输入汇款金额"}
		]}
	]
})
<div id="div_frmbtn" style="text-align:center;"><input type="button" id="frmbtn" name="frmbtn" class="button button-primary button-rounded button-small" value="汇款" /></div>
<div id="div_frmbtnre" style="text-align:center;DISPLAY: none;"><center><input type="button" id="frmbtnre" name="frmbtn" class="button button-primary button-rounded button-small" value="取消" /></div>
<script>
$(function(){
	var div_ = $("div[id='div_rows']");
	var div_remit = $(div_[div_.size() - 1]);
	//div_remit.hide();
	$("#form-goods-ediremit").find("div[class='row cl']:eq(-1)").hide();
	var stau = $("#gstau").val();
	if(stau == 5) {
		
		$("#remitMoney").attr("disabled","disabled");
		$("#div_frmbtnre").hide();
		$("#div_frmbtn").hide();
		div_remit.show();
	}
	$("#frmbtn").click(function() {
		$("#div_frmbtnre").show();
		$("#div_frmbtn").hide();
		$("#form-goods-ediremit").find("div[class='row cl']:eq(-1)").show();
		//div_remit.show();
		var gnum =  Number($("#goodsNum").val()) / Number($("#goodsSpecifications").val());
		var rm = Number($("#goodsBuyPrice").val()) * gnum;
		var gf = Number($("#goodsFreight").val());
		if(stau == 0) {
			$("#goodsStatus").val("1")
		} else if(stau == 1 || stau == 2) {
			$("#goodsStatus").val("3")
			$("#remitMoney").val(rm + (gnum * gf));
		} else if(stau == 3 || stau == 4) {
			$("#goodsStatus").val("4")
			$("#remitMoney").val(rm);
		}
	});
	
	$("#div_frmbtnre").click(function() {
		$("#div_frmbtnre").hide();
		$("#div_frmbtn").show();
		//div_remit.hide();
		$("#form-goods-ediremit").find("div[class='row cl']:eq(-1)").hide();
		$("#remitMoney").val("");
		if(stau == 0) {
			$("#goodsStatus").val("1")
		} else if(stau == 1) {
			$("#goodsStatus").val("3")
		} else if(stau == 3) {
			$("#goodsStatus").val("4")
		}
	});
	
	
	
	$("#remitMoney").keyup(function(){
		isNum(this)
	});
	

	function isNum(obj) {
		var val =$(obj).val().trim();
		if(isNaN(val)) {
			val = val.replace(/[^\d.-]/g, '');
			val = val.replace(/(^\s*)|(\s*$)/g,'');
			$(obj).val(val);
			$(obj).focus();
			return;
		}
		$(obj).val(val);
		return "";
	}

})
</script>